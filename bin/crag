#!/usr/bin/env raku

use lib '../lib';
use App::Crag;

sub MAIN(
    Str  $cmd?,
    Bool :$help = False,
    ) {
    if $help | ! $cmd {
        say q:to/END/;
            Usage:
                ./crag [--help] <cmd>
            Examples:
                [1] > crag 'say (1.6km / (60 * 60 * 1s)).in: <mph>'               #0.994194mph
                [2] > crag '$m=95kg; $a=♎️<9.81 m/s^2>; $f=$m*$a; say $f'         #931.95N
                [3] > crag 'say :<12.5 ft ±3%> .in: <mm>'                         #3810mm ±114.3
                [4] > crag '$λ=2.5nm; $ν=c/$λ; say $ν.norm'                       #119.916..PHz
                [5] > crag '$c=:<37 °C>; $f=:<98.6 °F>; say $f cmp $c'            #Same
                [6] > crag 'say |<80°T> + |<43°30′30″M> .T'                       #124°ESE (T)
                [7] > crag 'say @physics-constants-abbreviations.join: "\n"'      # ...
            More info:
                - https://github.com/librasteve/raku-Physics-Measure.git
                - https://github.com/librasteve/raku-Physics-Unit.git
                - https://github.com/librasteve/raku-Physics-Error.git
                - https://github.com/librasteve/raku-Physics-Constants.git
                - https://github.com/librasteve/raku-Physics-Navigation.git
                - https://github.com/raku-community-modules/Time-Duration-Parser
            NB: as a concession to laziness, crag swaps ':<' to '♎️<' and '|<' to '♓️<'
            END
    } else {
        eval-me($cmd);
    }
}
